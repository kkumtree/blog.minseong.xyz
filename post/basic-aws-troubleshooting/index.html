<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="apple-icon-180x180" sizes="180x180" href='/img/favicon/apple-icon-180x180.png'>
    <link rel="icon" type="image/png" sizes="32x32" href='/img/favicon/favicon-32x32.png'>
    <link rel="icon" type="image/png" sizes="16x16" href='/img/favicon/favicon-16x16.png'>
    <title>AWS íŠ¸ëŸ¬ë¸” ìŠˆíŒ… - 7ì£¼ ê°„ì˜ k8s ì‹¤ë¬´ ìŠ¤í„°ë””ë¥¼ ë§ˆì¹˜ë©° | kkumtree</title>
    
    <meta property="og:site_name" content="kkumtree" />
    <meta property="og:title" content="AWS íŠ¸ëŸ¬ë¸” ìŠˆíŒ… - 7ì£¼ ê°„ì˜ k8s ì‹¤ë¬´ ìŠ¤í„°ë””ë¥¼ ë§ˆì¹˜ë©°" />

    
    <meta property="og:image" content='https://blog.minseong.xyz/post/basic-aws-troubleshooting/cover.png' />
    <meta property="og:image:secure_url" content='https://blog.minseong.xyz/post/basic-aws-troubleshooting/cover.png' />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content='https://blog.minseong.xyz/post/basic-aws-troubleshooting/cover.png' />

    
    <link rel="stylesheet" href="https://blog.minseong.xyz/sass/theme.min.05bc9a89b9988ba7449154a7ccd83133b7df79fac13cc1945cffac151ac54dbb.css">

    
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <script src='/js/search.js'></script>
</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GCJ1CESNKD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GCJ1CESNKD');
</script><body><header id="navigation" class="p-navigation is-dark">
  <div class="p-navigation__row">
    <div class="p-navigation__banner">
      <div class="p-navigation__tagged-logo" style="min-width: 6rem;">
        <a class="p-navigation__link" href="/">
          <div class="p-navigation__logo-tag">
            <img class="p-navigation__logo-icon" src='/img/BlogWhite.svg' alt="">
          </div>
          <span class="p-navigation__logo-title">Blog</span>
        </a>
      </div>
      <a href="#navigation" class="p-navigation__toggle--open" title="menu">Menu</a>
      <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">Close menu</a>
    </div>
    <nav class="p-navigation__nav" aria-label="Example sub navigation">
      <ul class="p-navigation__items">
        
      </ul>

      <ul class="p-navigation__items">
        <li class="p-navigation__item">
          <a href="#" id="search-toggle" class="p-navigation__link" title="Search">
            ğŸ”
          </a>
        </li>
        <div id="search-modal" class="search-modal" style="display: none;">
    <div class="search-modal-content">
        <div class="search-header">
            <input type="text" id="search-input" placeholder="Search..." aria-label="Search">
            <button id="close-search" class="close-search" aria-label="Close search">Ã—</button>
        </div>
        <div id="search-results" class="search-results"></div>
    </div>
</div>

<style>
    .search-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top: 5rem;
    }

    .search-modal-content {
        background-color: #fff;
        padding: 2rem;
        border-radius: 8px;
        width: 80%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .search-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    #search-input {
        width: 100%;
        padding: 0.8rem;
        font-size: 1.2rem;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .close-search {
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        margin-left: 1rem;
    }

    .search-results {
        margin-top: 1rem;
    }

    .search-result-item {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #eee;
    }

    .search-result-item a {
        text-decoration: none;
        color: #333;
        font-weight: bold;
        font-size: 1.1rem;
    }

    .search-result-item p {
        margin-top: 0.5rem;
        color: #666;
        font-size: 0.9rem;
    }
</style>
        

        <li class="p-navigation__item">
          <a class="p-navigation__link" href="/tags">
            ğŸ·ï¸
          </a>
        </li>
        <li class="p-navigation__item--dropdown-toggle" id="link-4">
          <a class="p-navigation__link" aria-controls="account-menu">
            ğŸ”—
          </a>
          <ul class="p-navigation__dropdown--right" id="account-menu" aria-hidden="true">
            <li>
              <a href="https://github.com/kkumtree" class="p-navigation__dropdown-item" target="_blank"
                rel="noopener noreferrer">GitHub â§‰</a>
            </li>
            <li>
              <a href="https://www.linkedin.com/in/mscho7969" class="p-navigation__dropdown-item" target="_blank"
                rel="noopener noreferrer">Linkedin â§‰</a>
            </li>
            <li>
              <a href="https://launchpad.net/~mscho7969" class="p-navigation__dropdown-item" target="_blank"
                rel="noopener noreferrer">Launchpad â§‰</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header><div id="content">


<main>
  <section class="p-strip--image main-strip"
    }
    style="background-image:url('cover.png'); background-position: center; background-repeat: no-repeat; background-size: cover;"
    >
      <div class="row">
        
        <div class="col-6">
          <div class="p-card--overlay">
            <h2>AWS íŠ¸ëŸ¬ë¸” ìŠˆíŒ… - 7ì£¼ ê°„ì˜ k8s ì‹¤ë¬´ ìŠ¤í„°ë””ë¥¼ ë§ˆì¹˜ë©°</h2>
            <ul class="p-card__content p-inline-list--middot">
              
              <li class="p-inline-list__item">
                kkumtree
              </li>
              
            </ul>
            <p><u class=" timedisplay" style="text-decoration-style: dotted;">2023-02-25T22:07:23&#43;09:00</u></p>
            <p class="p-card__content"></p>
            
            <a href="/tags/aws" class="tag">
              <div class="p-chip">
                <span class="p-chip__value">AWS</span>
              </div>
            </a>
            
            <a href="/tags/kops" class="tag">
              <div class="p-chip">
                <span class="p-chip__value">kops</span>
              </div>
            </a>
            
            <a href="/tags/troubleshooting" class="tag">
              <div class="p-chip">
                <span class="p-chip__value">troubleshooting</span>
              </div>
            </a>
            
            <a href="/tags/cloudnet@" class="tag">
              <div class="p-chip">
                <span class="p-chip__value">CloudNet@</span>
              </div>
            </a>
            
          </div>
        </div>
        
      </div>
  </section>
  <section class="p-strip">
  <div class="row">
  <p>ìµœê·¼ <a href="https://gasidaseo.notion.site/CloudNet-Blog-c9dfa44a27ff431dafdd2edacc8a1863">CloudNet@</a>ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” Production Kubernetes Online Study(ì´í•˜, PKOS)ë„ ë§ˆì§€ë§‰ ì£¼ì°¨ê°€ ëë‚¬ìŠµë‹ˆë‹¤.<br>
ë‚¨ì€ ê³„íšì€ 4ì›”ë¶€í„° ì‹œì‘ë˜ëŠ” íœ´ì‹ê¸°ê°„(a.k.a. ê³„ì•½ë§Œë£Œ í›„)ì¤‘ ë³µìŠµ ê²¸, í¬ìŠ¤íŒ…ì„ í•´ë³´ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ì•„ë˜ì™€ ê°™ì´ ì‹¤íŒ¨ë¥¼ ê±°ë“­í•˜ì—¬ ì¶”ê°€ë¡œ ì•Œê²Œëœ ì†Œì†Œí•œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<p><img src="./images/cost_explorer.png" alt="keep_your_wallet">
(ë¬¼ë¡ , ìƒˆë²½ì— ê²¨ìš°ê²¨ìš° ì£¼ì°¨ë³„ ê³¼ì œ ì œì¶œí•˜ê³  ê¸°ì ˆí•˜ëŠ” ë°”ëŒì—, ë§›ì í•˜ë‹¤ ê¹¨ë‹«ê³  ì†ŒìŠ¤ë¼ì¹˜ê²Œ íœ´ëŒ€í°ìœ¼ë¡œ ìˆ˜ë™ ì‚­ì œí•œê²Œ ë¹„ìš©ì˜ ì£¼ ìš”ì¸ì´ê¸´ í•˜ë„¤ìš”;)</p>
<p>ë¶ˆí•„ìš”í•œ Try &amp; Failì„ ì¤„ì´ê³ , ì¦ê±°ìš´ k8s í•™ìŠµë˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h2 id="1-aws-ê³„ì •-ì ê¸ˆ-í•´ì œ">1. AWS ê³„ì • ì ê¸ˆ í•´ì œ</h2>
<h3 id="ìƒí™©">ìƒí™©</h3>
<ul>
<li>
<p>ì²˜ìŒ 1ì£¼ì°¨ ì•ˆë‚´ê°€ ëë‚˜ê³  Route53 Hostnameì„ êµ¬ë§¤í•˜ë ¤ê³  í•˜ë‹ˆ, ìê¾¸ ê²°ì œê°€ ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
</li>
<li>
<p>kops ë° ì‹¤ìŠµì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•œ DNSê°€ CoreDNSì˜€ê¸° ë•Œë¬¸ì—, ì´ìª½ì—ì„œ ê³µìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì¶”ê°€ë¡œ ë„ë©”ì¸ì„ êµ¬ë§¤í•˜ë ¤ í–ˆìœ¼ë‚˜ ì—¬ëŸ¬ë²ˆ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</li>
<li>
<p>ë‹¤ë§Œ, ê¸°ì¡´ì— íƒ€ DNS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, í•´ë‹¹ ì œê³µì‚¬ì—ì„œ ì œê³µí•˜ëŠ” Domain transfer registrarë¥¼ í†µí•´ Route53ìœ¼ë¡œ ì´ì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
ì €ëŠ” icann 90ì¼ ì œí•œì´ í’€ë¦¬ìë§ˆì, êµ¬ì…í–ˆë˜ ì œê³µì‚¬ì—ì„œ íƒ€ ì œê³µì‚¬ë¡œ ì˜®ê¸´ì§€ ì–¼ë§ˆ ì•ˆëœ ë„ë©”ì¸ì´ë¼ì„œ, ìƒˆë¡œ êµ¬ë§¤í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p>
<p><img src="./images/problem1.png" alt="problem1"></p>
</li>
</ul>
<h3 id="ì›ì¸">ì›ì¸</h3>
<ul>
<li>
<p>AWSëŠ” ì¹œì ˆí•˜ê²Œë„ <a href="https://www.merriam-webster.com/dictionary/compromised">compromised</a> accountì— ëŒ€í•œ ì•Œë¦¼ì„ ë³´ë‚´ì¤ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì‘ë…„ì— ê°œì„¤í•œ free-tier ê³„ì •ì˜ ì•”í˜¸ë„ ìŠì–´ì„œ ì¬ì„¤ì •í•˜ê³ , ë„ë©”ì¸ ê²°ì œë¥¼ ìœ„í•´ ì¹´ë“œ ë³€ê²½ê¹Œì§€ í•˜ì˜€ëŠ”ë°, ì´ë¡œ ì¸í•´ AWS ì¸¡ì—ì„œ ì´ìƒíƒì§€ë¥¼ í•˜ì—¬ ê³„ì • ì ê¸ˆì„ ê±¸ì—ˆë˜ ê²ƒì…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ê°œì¸ì ìœ¼ë¡œëŠ” ì´ë¯¸ Virtual MFAë„ ê±¸ì–´ë†“ì•˜ì—ˆê¸° ë•Œë¬¸ì—, ë§ì´ ë¯¼ê°í•˜ë‹¤ê³  ìƒê°ì€ í•˜ì§€ë§Œ IAM User ì ‘ì†ë„ ì•„ë‹ˆê³  Root ì ‘ì†ì´ë¼ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•œ ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.</p>
<p><img src="./images/problem1-1.png" alt="problem1-1"></p>
</li>
</ul>
<h3 id="í•´ê²°">í•´ê²°</h3>
<ul>
<li>
<p>ìë™ ìƒì„±ëœ ì¼€ì´ìŠ¤ë¥¼ ëê¹Œì§€ ì œëŒ€ë¡œ ì½ì–´ë³´ë‹ˆ, ë§ˆì§€ë§‰ì— ì´ ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤.</p>
<pre tabindex="0"><code class="language-msg" data-lang="msg">Step 4: [IMPORTANT] You must respond to the existing Support Case or create a new one to confirm completion of the steps above in order to restore access to your account, prevent suspension, and apply for a billing adjustment, if applicable. 

While logged in to your account, access the Support Center and reply to the existing Support Case to confirm completion of steps 1-3. If you cannot find an existing Support Case, please create a new one by going here: https://console.aws.amazon.com/support/home?#/  
</code></pre></li>
<li>
<p>ì¦‰, AWS ì¸¡ì—ì„œ ìë™ìœ¼ë¡œ ìƒì„±í•œ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ë‹µë³€ì„ í•´ì£¼ì–´ì•¼ ê³„ì • ì ê¸ˆì´ í•´ì œë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì €ëŠ” í•´ë‹¹ ë¶€ë¶„ì„ ë°”ë¡œ ì¸ì§€ë¥¼ ëª»í–ˆê¸° ë•Œë¬¸ì—, ìƒˆë¡œìš´ ì¼€ì´ìŠ¤ë¥¼ ì—´ì–´ì„œ ê³„ì • í•´ì œë¥¼ ìš”ì²­í•˜ëŠ” ë°©ë²•ì„ íƒí–ˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì•„ë§ˆì¡´ ì§êµ¬í•˜ë©´ì„œ, íŒŒì†í’ˆì— ëŒ€í•œ ë¬¸ì˜ë¥¼ í•  ë•Œì²˜ëŸ¼ ì±„íŒ…ì„ í†µí•´ ë¬¸ì˜ë¥¼ í•´ë„ í•´ê²°ì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.</li>
<li>ë³¸ì¸ì„ í™•ì¸í•˜ëŠ” ê¸°ë³¸ì ì¸ ìŠ¤í•‘í¬ìŠ¤-like ì§ˆë¬¸ë“¤ì— ëŒ€í•´ ë‹µë³€ì„ í•˜ë©´, ì§„í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
<ul>
<li>ì£¼ì–´ì§„ ì§ˆë¬¸ì€ ê°„ë‹¨í•˜ë‹ˆ ì§ì ‘&hellip; í•´ë³´ì‹œë©´ ì••ë‹ˆë‹¤(?)</li>
</ul>
</li>
<li>ë‹¤ë§Œ, ì²˜ìŒ í•´ë³¸ê²ƒì´ë¼ì„œ ìƒˆë²½ 02ì‹œì™€ ì˜¤ì „ 11ì‹œì— ë‘ ë²ˆ ì±„íŒ…í•˜ì—¬ í•´ê²°í–ˆìŠµë‹ˆë‹¤.<br>
ì„œë¹„ìŠ¤íŒ€ì´ ê²€í† í•˜ëŠ” ì‹œê°„ì´ ìˆì—ˆë˜ ê²ƒ ê°™ë„¤ìš”.</li>
</ul>
<pre tabindex="0"><code class="language-msg" data-lang="msg">05:10:03 PM Unknown0: Hello, my name is Unknown0 and I am here to assist you today. While I review your case details, would you please share your name with me?
05:10:17 PM Customer: Hi, my name is Lorem Ipsum
05:11:21 PM Unknown0: I see that your account is compromised
05:11:43 PM Unknown0: A case 11712364061 was sent to you but you did not respond
05:11:51 PM Unknown0: Your account needs to be secured
05:12:11 PM Customer: Oh, I see. How can I respond about it?
05:12:17 PM Unknown0: I will transfer your case to the team that will beable to assist you to get the account secured
05:13:34 PM Customer: Okay... How much time I have to take?
05:15:08 PM Unknown0: You can initiate another chat after 10 minutes
05:15:19 PM Customer: A case 11712364061... I just forgot my password so... I close the case as solved. // Aha.
05:15:38 PM Unknown0: Just need to put in some notes before i can transfer the case to the team
</code></pre><pre tabindex="0"><code class="language-msg" data-lang="msg">02:18:52 AM Unknown1: The service team had placed restrictions on your account as the system detected unauthorized activity, and after a discussion with we requested for additional information, the service team reviewed your account and the information you had provided, and confirmed that your account has not been compromised and does not indicate a risk of compromise.
</code></pre></li>
<li>
<p>ì´í›„ì—, ì •ìƒì ìœ¼ë¡œ ë„ë©”ì¸ êµ¬ë§¤ê°€ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.</p>
</li>
</ul>
<h2 id="2-route53-ë„ë©”ì¸ê³¼-acm">2. Route53 ë„ë©”ì¸ê³¼ ACM</h2>
<h3 id="ìƒí™©-1">ìƒí™©</h3>
<ul>
<li>ë‹¤ë¥¸ DNS ì œê³µíšŒì‚¬ì—ì„œë„ ë¬¼ë¡  ê³ ìœ ì˜ í¸ì˜ê¸°ëŠ¥ì„ ì œê³µí•˜ê² ì§€ë§Œ, AWSë„ ACMì„ í†µí•´ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
ë‹¤ë§Œ, AWSì—ì„œ ACMì„ ì²˜ìŒ ë‹¤ë¤„ë´ì„œ ë§ˆë¦¬ì˜¤/í…ŒíŠ¸ë¦¬ìŠ¤ ë“± í…ŒìŠ¤íŠ¸ ê²Œì„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì„œë¸Œë„ë©”ì¸ì—ëŠ” ì •ìƒì ìœ¼ë¡œ ì ìš©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</li>
<li>(ì˜ˆì‹œ)
<ul>
<li><a href="https://awskops.null/">https://awskops.null/</a> ì— ì ‘ì†í•  ê²½ìš°, ì •ìƒì ìœ¼ë¡œ SSL ì ìš© í™•ì¸</li>
<li><a href="https://subdomain.awskops.null/">https://subdomain.awskops.null/</a> ì— ì ‘ì†í•  ê²½ìš°, SSL ì ìš©ì´ <strong>ì•ˆë¨</strong></li>
</ul>
</li>
</ul>
<h3 id="ì›ì¸-1">ì›ì¸</h3>
<ul>
<li>ACMì„ í†µí•´ ë°œê¸‰ë°›ì€ ì¸ì¦ì„œë¥¼ Route53ì— ë“±ë¡í•  ë•Œ ì„œë¸Œë„ë©”ì¸ì— ëŒ€í•œ ê°’ë„ ì„¤ì •í•´ì•¼ í•˜ëŠ”ë°,<br>
ì´ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•„ ë°œìƒí•œ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.</li>
</ul>
<h3 id="í•´ê²°-1">í•´ê²°</h3>
<ul>
<li>
<p>ì•„ë˜ì™€ ê°™ì´, ì„œë¸Œë„ë©”ì¸ë„ í—ˆìš©ì„ í•˜ë©´ ë©ë‹ˆë‹¤. ìŠ¤í„°ë””ìš©ì´ì—ˆê¸° ë•Œë¬¸ì— ëª¨ë“  ì„œë¸Œë„ë©”ì¸ì— ëŒ€í•´ í—ˆìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img src="./images/problem2.png" alt="problem2"></p>
</li>
<li>
<p>ë‹¤ë§Œ, ì²˜ìŒì— ì ìš©í•œ ì¸ì¦ì„œëŠ” ì„œë¸Œë„ë©”ì¸ ì¶”ê°€ê°€ ì–´ë µìŠµë‹ˆë‹¤. ì €ëŠ” ì•„ë˜ì™€ ê°™ì€ ìŠ¤í…ìœ¼ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<ol>
<li>ACMì—ì„œ ì„œë¸Œë„ë©”ì¸ë„ í¬í•¨í•˜ëŠ” ì¸ì¦ì„œë¥¼ ìƒˆë¡œ ë°œê¸‰.</li>
<li>Route53 CNAMEì—ì„œ ê¸°ì¡´ ì¸ì¦ì„œ ì •ë³´ë¥¼ ì§€ìš°ê³ , ìƒˆë¡œ ë°œê¸‰ë°›ì€ ì¸ì¦ì„œ ì •ë³´ë¥¼ ë“±ë¡.</li>
<li>ACMì—ì„œ ê¸°ì¡´ ì¸ì¦ì„œë¥¼ ì‚­ì œ.</li>
</ol>
</li>
</ul>
<h2 id="3-kops-cluster-ìƒì„±-ì‹¤íŒ¨-í›„-ìˆ˜ë™-ì‚­ì œ">3. kops cluster ìƒì„± ì‹¤íŒ¨ í›„ ìˆ˜ë™ ì‚­ì œ</h2>
<h3 id="ìƒí™©-2">ìƒí™©</h3>
<ul>
<li>
<p>cloudformation stackì„ ìƒì„±í•˜ì—¬ kops cluster êµ¬ì„± ì‹œ, í”í•œ ìœ ì €ì—ëŸ¬ë¡œ ì´ë¥¼ ì‚­ì œë¥¼ í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ìƒê¹ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´&hellip;.</p>
<ul>
<li>key pairsì—ëŠ” ë“±ë¡ì„ í•˜ì˜€ìœ¼ë‚˜, í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë‹¨ë§ê¸°ì—ëŠ” í•´ë‹¹ í‚¤ê°€ ì—†ëŠ” ê²½ìš° (ssh ì ‘ì† ì‹¤íŒ¨)</li>
<li>ssh ì ‘ì†ì— ì‹¤íŒ¨í•˜ë©´, ì•„ë˜ì™€ ê°™ì€ í´ëŸ¬ìŠ¤í„° ì‚­ì œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì›¹ ì½˜ì†”ì—ì„œ ì‘ì—…ì„ í•´ì•¼í•©ë‹ˆë‹¤.</li>
</ul>
<pre tabindex="0"><code class="language-script" data-lang="script">kops delete cluster --yes &amp;&amp; aws cloudformation delete-stack --stack-name mykops
</code></pre></li>
<li>
<p>ì›¹ ì½˜ì†”ë¡œ í•˜ë‹¤ë³´ë©´, ë¶„ëª… cloudfomation stackì„ ì‚­ì œí•˜ì˜€ëŠ”ë°, EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì•„ë¬´ë¦¬ ì§€ì›Œë„ ì§€ì›Œì§€ì§€ ì•ŠëŠ” ê·¸ëŸ° ê¸°í˜„ìƒì´ ì¼ì–´ë‚©ë‹ˆë‹¤.</p>
</li>
</ul>
<h3 id="ì›ì¸-2">ì›ì¸</h3>
<ul>
<li>(ì¶”ì •) ìŠ¤í„°ë””ë¥¼ í•˜ë©´ì„œ í™œìš©í–ˆë˜ cloudformation stack êµ¬ì„± íŒŒì¼ì—ì„œ ìƒì„±ì„ í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
<ul>
<li>ë³µìŠµí•˜ë©´ì„œ í•œë²ˆ ë” ì‚´í´ë³´ê² ì§€ë§Œ&hellip; kops íŒŒë¼ë¯¸í„°ì—ì„œ<br>
<code>--master-size</code>, <code>--node-size</code>, <code>--node-count</code> ë“±ì„ ì§€ì •í•˜ê¸° ë•Œë¬¸ì—<br>
ì´ë¥¼ ASGì— ë°˜ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</li>
</ul>
</li>
<li><a href="https://kops.sigs.k8s.io/getting_started/aws/#create-cluster-configuration">Docs</a>ì—ì„œë„ ê·¸ë ‡ë‹¤ê³  í•˜ë„¤ìš”.</li>
</ul>
<h3 id="í•´ê²°-2">í•´ê²°</h3>
<ul>
<li>
<p>ê´€ì„±ì— ë”°ë¼, ì›¹ ì½˜ì†” í•˜ë‚˜ì”© í´ë¦­í•´ë³´ë©´ì„œ ì•„ë˜ 4ê°€ì§€ ë¨¼ì € í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<ul>
<li>ìë™ ìƒì„±ë˜ë©´, ë‹¹ì—°íˆ ASGì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ê²ƒì´ë‹ˆ, ì´ë¥¼ ì§€ìš°ë©´ ë˜ê² ê±°ë‹ˆ í•˜ê³  ì‚­ì œ</li>
<li>ì´í›„ì— EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ìš°ë©´, ì¬ìƒì„±ë˜ì§€ ì•ŠìŒì„ í™•ì¸</li>
<li>S3ì— íŒŒì¼ì´ ë‚¨ì•„ìˆì„í…Œë‹ˆ ì‚­ì œ</li>
<li>DNSë¥¼ í†µí•´ ëŒ€ì‹œë³´ë“œë‚˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ Route53ì— ë‚¨ì•„ìˆëŠ” kops ê´€ë ¨ Aë ˆì½”ë“œ ì‚­ì œ</li>
</ul>
</li>
<li>
<p>ê°ì¡ê³  k8së¥¼ ê±´ë“¤ì–´ë³¸ ì ì´ ì—†ì—ˆë˜ì§€ë¼ ì²« ì£¼ì°¨ë¶€í„° í—ˆë‘¥ì§€ë‘¥ í—¤ë©”ì—ˆëŠ”ë°,<br>
ì´ë¯¸ ê°€ì‹œë‹¤ë‹˜ì´ ê°€ì´ë“œì— ì¨ë‘ì…¨ì—ˆë˜ ê±¸ ì œê°€ ëª»ì°¾ì•˜ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre tabindex="0"><code class="language-guide" data-lang="guide">1. EC2 Auto Scaling ê·¸ë£¹ : 3ê°œ ì‚­ì œ
2. EC2 ì‹œì‘ í…œí”Œë¦¿ Launch Templates : 3ê°œ ì‚­ì œ
3. S3 ë²„í‚· ë¹„ìš°ê¸°
4. Route53 ì— ì¶”ê°€ëœ A ë ˆì½”ë“œ 3ê°œ ì‚­ì œ
5. CloudFormation ì‚­ì œ
</code></pre></li>
</ul>
<h2 id="4-kops-ë¡¤ë§-ì—…ë°ì´íŠ¸ê°€-ë¬´í•œì •-ì§„í–‰ë˜ëŠ”-í˜„ìƒ">4. kops ë¡¤ë§ ì—…ë°ì´íŠ¸ê°€ ë¬´í•œì • ì§„í–‰ë˜ëŠ” í˜„ìƒ</h2>
<h3 id="ìƒí™©-3">ìƒí™©</h3>
<ul>
<li>
<p>ì•Œë ¤ì£¼ì‹  ë°©ë²•ëŒ€ë¡œ <code>kops edit $(TARGET)</code> ì´í›„, ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ í–ˆëŠ”ë° ì˜ˆìƒ ì‹œê°„ë³´ë‹¤ 2~3ë°° ì§€ë‚˜ë„ ì™„ë£Œê°€ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
</li>
<li>
<p><code>kops update cluster --yes &amp;&amp; echo &amp;&amp; sleep 3 &amp;&amp; kops rolling-update cluster --yes</code></p>
</li>
<li>
<p>ì œ ê²½ìš°ì—ëŠ” ì„¤ì • ê°’ì—ì„œ ì •ì˜ëœ ë…¸ë“œ ìˆ˜ ë§Œí¼ ìƒì„±ì´ ë˜ì§€ ì•ŠëŠ” í˜„ìƒì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p><img src="./images/problem4.png" alt="problem4"></p>
</li>
</ul>
<h3 id="ì›ì¸-3">ì›ì¸</h3>
<ul>
<li>ì´ëŠ” ê¹€ì˜ˆì¤€(a.k.a. ë™ë§‰ê³¨)ë‹˜ê»˜ì„œ í•´ê²°ë°©ë²•ì„ ê³µìœ í•´ì£¼ì…¨ëŠ”ë°, ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì¿¼íƒ€ì— ë„ë‹¬í•´ì„œ ì¼ì–´ë‚œ ê²ƒì´ë¼ê³  í•©ë‹ˆë‹¤.</li>
<li>ì¿¼íƒ€ ë¬¸ì œë¼ëŠ” ì‚¬ì‹¤ ìì²´ë¥¼ ëª°ëìœ¼ë©´, ì•„ë§ˆ ì¤‘ê°„ì— íƒˆë½í–ˆì—ˆì„ ê²ƒ ê°™ì•˜ëŠ”ë°, ì´ì–´ì§ˆ <code>í•´ê²°</code>ë°©ë²•ì„ ê³µìœ ë°›ì•„ì„œ, í•´ë‹¹ ì£¼ì°¨ ê³¼ì œë¥¼ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</li>
</ul>
<h3 id="í•´ê²°-3">í•´ê²°</h3>
<ul>
<li>
<p><a href="https://support.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase&amp;limitType=service-code-ec2-instances&amp;serviceLimitIncreaseType=ec2-instances&amp;type=service_limit_increase">AWS support</a>ì—ì„œ ì¦ì„¤ì„ ìš”ì²­í•˜ë©´ ë©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì„œìš¸ ë¦¬ì „ / All Standard Instance Types / 40ê°œë¡œ ì¦ì„¤ì„ ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img src="./images/problem4-1.png" alt="problem4-1"></p>
</li>
<li>
<p>ê³µìœ í•´ì£¼ì‹  ë‚´ìš©ëŒ€ë¡œ, ìë™ìœ¼ë¡œ ì‘ë‹µ ë° ì ìš©ì´ ì´ë£¨ì–´ì§€ê³  ì•„ë¬´ë¦¬ ëŠ¦ì–´ë„ 30ë¶„ ë‚´ë¡œ ì™„ë£Œë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì‹¤ì œë¡œëŠ” ë©”ì¼ ë°›ìë§ˆì, ë¡¤ë§ ì—…ë°ì´íŠ¸ ë„ê³  ì¼°ë”ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì˜ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
<li>
<p>ì•„ì‰½ê²Œë„ ìš”ì²­í–ˆë˜ í•´ë‹¹ ì¿¼íƒ€ëŠ” ì›¹ ì½˜ì†”ì—ì„œ ë”°ë¡œ í™•ì¸í•˜ëŠ” ë°©ë²•ì€ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
</li>
</ul>
<h2 id="reference">reference</h2>
<ul>
<li><a href="https://gasidaseo.notion.site/CloudNet-Blog-c9dfa44a27ff431dafdd2edacc8a1863">CloudNet@</a> Notion ë° Slack ì±„ë„</li>
<li><a href="https://kops.sigs.k8s.io/getting_started/aws/#create-cluster-configuration">kops Docs</a></li>
</ul>

  </div>
  </section>
  <section class="p-strip">
    <div class="row">
      <script src="https://giscus.app/client.js"
        data-repo="kkumtree/blog.minseong.xyz"
        data-repo-id="R_kgDOIv-sqA"
        data-category="Blog Comments"
        data-category-id="DIC_kwDOIv-sqM4CW7uO"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="ko"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
      </script>
    </div>
  </section>
  <div class="card w-full bg-base-100 shadow-xl">
  <div class="card-body" id="adbody">
      <script async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1254864146899485"
          crossorigin="anonymous"></script>
      
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1254864146899485"
          data-ad-slot="3556422150" data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </div>
  
  <script>
      let adsection = document.getElementsByClassName("adsbygoogle")[0];
      let adfallback = document.getElementById("adfallback");
      adfallback.style.display = "none";
      if (window.getComputedStyle(adsection).display == "none") {
          document.getElementById("adbody").style.display = "none";
          adfallback.style.display = "block";
      } 
  </script>
</div>
  <section class="p-strip--light">
    <div class="row">
      
      <div class="col-12">
        <div class="p-media-object">
          <img src="https://avatars.githubusercontent.com/u/52643858?v=4" class="p-media-object__image is-round" alt="">
          <div class="p-media-object__details">
            <h3 class="p-media-object__title">
              <a href="#">kkumtree</a>
            </h3>
            <p class="p-media-object__content">plumber for infra</p>
            <ul class="p-inline-list--middot">
              <li class="p-inline-list__item"><a href="mailto:mscho7969@ubuntu.com">Email</a></li>
              <li class="p-inline-list__item"><a href="https://launchpad.net/~mscho7969">Launchpad</a></li>
              <li class="p-inline-list__item"><a href="https://github.com/kkumtree">GitHub</a></li>
            </ul>
          </div>
        </div>
         
    </div>
  </section>
  <section class="p-strip">
    <div class="row">
      <footer class="p-article-pagination">
        
        <a class="p-article-pagination__link--previous" href="/post/traefik-with-minikube-in-m1/">
          <span class="p-article-pagination__label">Previous</span>
          <span class="p-article-pagination__title">Traefikì„ í™œìš©í•œ minikube ì˜ˆì œ êµ¬í˜„ì‹œë„ w/Apple Silicon</span>
        </a>
        
        
        <a class="p-article-pagination__link--next" href="/post/how-to-request-spot-with-kops/">
          <span class="p-article-pagination__label">Next</span>
          <span class="p-article-pagination__title">kopsë¡œ ì†ì‰½ê²Œ spot instance ìš”ì²­í•˜ê¸°</span>
        </a>
        
      </footer>
    </div>
  </section>
</main>

        </div><section class="p-strip--accent">
  <div class="row">
    <div class="col-12">
      <h2>kkumtree</h2>
      <ul class="p-inline-list--middot is-dark">
        <li class="p-inline-list__item">
          <a href="mailto:mscho7969@ubuntu.com">Contact with (Email)</a>
        </li>
        
        
        
        <li class="p-inline-list__item">
          <a href="https://github.com/kkumtree">GitHub</a>
        </li>
        <li class="p-inline-list__item">
          <a href="https://launchpad.net/~mscho7969">Launchpad</a>
        </li>
      </ul>
      <a href="https://github.com/kkumtree/blog.minseong.xyz">Source code on GitHub</a>
      <p>
        Â© 2025 kkumtree and contributors All rights reserved.<br>
        Licensed under <br>
        <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">
          CC BY-NC-ND 4.0
          <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg">
          <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg">
          <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg">
          <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nd.svg">
        </a>
      </p>
    </div>
  </div><script type="text/javascript" src='/js/v-framework.js'></script>
<script type="text/javascript" src='/js/timedisplay.js'></script>
<script>

let slides = document.getElementsByClassName("main-slide");
let index = 0;
let count = slides.length;
function setSlideIndex(destination) {
    index = destination % count;
    index = index < 0 ? index * -1 : index;
    for (let i = 0; i < count; i++) {
        if(i == index) {
            slides[i].style.display = "block";
        } else {
            slides[i].style.display = "none";
        }
    }
}
function nextSlide() {
    setSlideIndex(index + 1);
}
function prevSlide() {
    setSlideIndex(index - 1);
}
setSlideIndex(0);
setInterval(nextSlide, 5000);
</script>

</body>
</html>
